{% extends 'base.html' %}
{% load static %}

{% block title %}My Profile - Kouekam Digital Hub{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 py-8 lg:py-12">
    <div class="px-4 mx-auto max-w-5xl lg:px-6">
        <!-- Header with Gradient Background -->
        <div class="relative overflow-hidden rounded-2xl bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 shadow-2xl mb-8">
            <div class="absolute inset-0 bg-black opacity-10"></div>
            <div class="relative px-8 py-12 lg:py-16">
                <div class="flex flex-col md:flex-row items-center md:items-start gap-8">
                    <!-- Profile Photo with Ring -->
                    <div class="relative flex-shrink-0">
                        <div class="absolute inset-0 rounded-full bg-white opacity-20 blur-xl"></div>
                        {% if profile.photo %}
                            <img src="{{ profile.photo.url }}" alt="Profile Photo" 
                                 class="relative w-32 h-32 lg:w-40 lg:h-40 rounded-full object-cover ring-4 ring-white dark:ring-gray-800 shadow-2xl">
                        {% else %}
                            <div class="relative w-32 h-32 lg:w-40 lg:h-40 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center ring-4 ring-white dark:ring-gray-800 shadow-2xl">
                                <i class="fas fa-user text-6xl lg:text-7xl text-white opacity-80"></i>
                            </div>
                        {% endif %}
                        <div class="absolute -bottom-2 -right-2 bg-green-500 rounded-full w-6 h-6 border-4 border-white dark:border-gray-800"></div>
                    </div>

                    <!-- Profile Info -->
                    <div class="flex-1 text-center md:text-left text-white">
                        <h1 class="text-3xl lg:text-4xl font-bold mb-2 drop-shadow-lg">
                            {{ user.get_full_name|default:user.email }}
                        </h1>
                        {% if profile.tagline %}
                            <p class="text-lg lg:text-xl text-blue-100 mb-4 font-medium">{{ profile.tagline }}</p>
                        {% endif %}
                        <div class="flex flex-wrap items-center justify-center md:justify-start gap-4 text-sm text-blue-100">
                            <div class="flex items-center gap-2">
                                <i class="fas fa-envelope"></i>
                                <span>{{ user.email }}</span>
                            </div>
                            {% if profile.updated_at %}
                            <div class="flex items-center gap-2">
                                <i class="fas fa-clock"></i>
                                <span>Updated {{ profile.updated_at|timesince }} ago</span>
                            </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Edit Button -->
                    <div class="flex-shrink-0">
                        <a href="{% url 'edit_profile' %}" 
                           class="inline-flex items-center gap-2 px-6 py-3 bg-white text-blue-600 rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 hover:bg-blue-50">
                            <i class="fas fa-edit"></i>
                            Edit Profile
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Main Content (2 columns) -->
            <div class="lg:col-span-2 space-y-6">
                <!-- About Me Card -->
                <div class="card-hover group">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="p-3 bg-blue-100 dark:bg-blue-900/30 rounded-xl">
                            <i class="fas fa-user-circle text-2xl text-blue-600 dark:text-blue-400"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-gray-900 dark:text-white">About Me</h2>
                    </div>
                    {% if profile.bio %}
                        <div class="prose prose-gray dark:prose-invert max-w-none">
                            <p class="text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-line text-lg">{{ profile.bio }}</p>
                        </div>
                    {% else %}
                        <div class="text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl">
                            <i class="fas fa-info-circle text-4xl text-gray-400 dark:text-gray-500 mb-3"></i>
                            <p class="text-gray-500 dark:text-gray-400 mb-4">No bio added yet.</p>
                            <a href="{% url 'edit_profile' %}" class="inline-flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:underline font-medium">
                                <i class="fas fa-plus"></i>Add bio
                            </a>
                        </div>
                    {% endif %}
                </div>

                <!-- Social Links Card -->
                <div class="card-hover">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="p-3 bg-purple-100 dark:bg-purple-900/30 rounded-xl">
                            <i class="fas fa-share-alt text-2xl text-purple-600 dark:text-purple-400"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Social Links</h2>
                    </div>
                    {% if profile.social_links.linkedin or profile.social_links.github or profile.social_links.twitter or profile.social_links.website %}
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            {% if profile.social_links.linkedin %}
                                <a href="{{ profile.social_links.linkedin }}" target="_blank" rel="noopener noreferrer" 
                                   class="group flex items-center gap-3 p-4 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl border border-blue-200 dark:border-blue-700 hover:shadow-lg hover:scale-105 transition-all duration-200">
                                    <div class="flex-shrink-0 p-3 bg-blue-600 rounded-lg group-hover:scale-110 transition-transform">
                                        <i class="fab fa-linkedin text-white text-xl"></i>
                                    </div>
                                    <div class="flex-1 min-w-0 overflow-hidden">
                                        <p class="font-semibold text-gray-900 dark:text-white mb-1">LinkedIn</p>
                                        <p class="text-xs text-gray-600 dark:text-gray-400 truncate break-all">{{ profile.social_links.linkedin }}</p>
                                    </div>
                                    <div class="flex-shrink-0">
                                        <i class="fas fa-external-link-alt text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 text-sm"></i>
                                    </div>
                                </a>
                            {% endif %}
                            {% if profile.social_links.github %}
                                <a href="{{ profile.social_links.github }}" target="_blank" rel="noopener noreferrer" 
                                   class="group flex items-center gap-3 p-4 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800/20 dark:to-gray-700/20 rounded-xl border border-gray-200 dark:border-gray-700 hover:shadow-lg hover:scale-105 transition-all duration-200">
                                    <div class="flex-shrink-0 p-3 bg-gray-800 dark:bg-gray-700 rounded-lg group-hover:scale-110 transition-transform">
                                        <i class="fab fa-github text-white text-xl"></i>
                                    </div>
                                    <div class="flex-1 min-w-0 overflow-hidden">
                                        <p class="font-semibold text-gray-900 dark:text-white mb-1">GitHub</p>
                                        <p class="text-xs text-gray-600 dark:text-gray-400 truncate break-all">{{ profile.social_links.github }}</p>
                                    </div>
                                    <div class="flex-shrink-0">
                                        <i class="fas fa-external-link-alt text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-400 text-sm"></i>
                                    </div>
                                </a>
                            {% endif %}
                            {% if profile.social_links.twitter %}
                                <a href="{{ profile.social_links.twitter }}" target="_blank" rel="noopener noreferrer" 
                                   class="group flex items-center gap-3 p-4 bg-gradient-to-r from-sky-50 to-sky-100 dark:from-sky-900/20 dark:to-sky-800/20 rounded-xl border border-sky-200 dark:border-sky-700 hover:shadow-lg hover:scale-105 transition-all duration-200">
                                    <div class="flex-shrink-0 p-3 bg-sky-500 rounded-lg group-hover:scale-110 transition-transform">
                                        <i class="fab fa-twitter text-white text-xl"></i>
                                    </div>
                                    <div class="flex-1 min-w-0 overflow-hidden">
                                        <p class="font-semibold text-gray-900 dark:text-white mb-1">Twitter</p>
                                        <p class="text-xs text-gray-600 dark:text-gray-400 truncate break-all">{{ profile.social_links.twitter }}</p>
                                    </div>
                                    <div class="flex-shrink-0">
                                        <i class="fas fa-external-link-alt text-gray-400 group-hover:text-sky-600 dark:group-hover:text-sky-400 text-sm"></i>
                                    </div>
                                </a>
                            {% endif %}
                            {% if profile.social_links.website %}
                                <a href="{{ profile.social_links.website }}" target="_blank" rel="noopener noreferrer" 
                                   class="group flex items-center gap-3 p-4 bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl border border-green-200 dark:border-green-700 hover:shadow-lg hover:scale-105 transition-all duration-200">
                                    <div class="flex-shrink-0 p-3 bg-green-600 rounded-lg group-hover:scale-110 transition-transform">
                                        <i class="fas fa-globe text-white text-xl"></i>
                                    </div>
                                    <div class="flex-1 min-w-0 overflow-hidden">
                                        <p class="font-semibold text-gray-900 dark:text-white mb-1">Website</p>
                                        <p class="text-xs text-gray-600 dark:text-gray-400 truncate break-all">{{ profile.social_links.website }}</p>
                                    </div>
                                    <div class="flex-shrink-0">
                                        <i class="fas fa-external-link-alt text-gray-400 group-hover:text-green-600 dark:group-hover:text-green-400 text-sm"></i>
                                    </div>
                                </a>
                            {% endif %}
                        </div>
                    {% else %}
                        <div class="text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl">
                            <i class="fas fa-share-alt text-4xl text-gray-400 dark:text-gray-500 mb-3"></i>
                            <p class="text-gray-500 dark:text-gray-400 mb-4">No social links added yet.</p>
                            <a href="{% url 'edit_profile' %}" class="inline-flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:underline font-medium">
                                <i class="fas fa-plus"></i>Add social links
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- Sidebar (1 column) -->
            <div class="space-y-6">
                <!-- CV Card -->
                <div class="card-hover sticky top-24">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="p-3 bg-red-100 dark:bg-red-900/30 rounded-xl">
                            <i class="fas fa-file-pdf text-2xl text-red-600 dark:text-red-400"></i>
                        </div>
                        <h2 class="text-xl font-bold text-gray-900 dark:text-white">Resume / CV</h2>
                    </div>
                    {% if profile.cv_file %}
                        <div class="space-y-4">
                            <div class="p-4 bg-gradient-to-br from-red-50 to-pink-50 dark:from-red-900/20 dark:to-pink-900/20 rounded-xl border border-red-200 dark:border-red-800">
                                <div class="flex items-start gap-3">
                                    <div class="p-2 bg-red-600 rounded-lg">
                                        <i class="fas fa-file-pdf text-white text-lg"></i>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <p class="font-semibold text-gray-900 dark:text-white text-sm truncate">{{ profile.cv_file.name|slice:"13:" }}</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">PDF Document</p>
                                    </div>
                                </div>
                            </div>
                            <a href="{{ profile.cv_file.url }}" target="_blank" 
                               class="w-full inline-flex items-center justify-center gap-2 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200">
                                <i class="fas fa-download"></i>
                                Download CV
                            </a>
                        </div>
                    {% else %}
                        <div class="text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl">
                            <i class="fas fa-file-pdf text-4xl text-gray-400 dark:text-gray-500 mb-3"></i>
                            <p class="text-gray-500 dark:text-gray-400 mb-4 text-sm">No CV uploaded yet.</p>
                            <a href="{% url 'edit_profile' %}" class="inline-flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:underline font-medium text-sm">
                                <i class="fas fa-upload"></i>Upload CV
                            </a>
                        </div>
                    {% endif %}
                </div>

                <!-- Quick Stats Card -->
                <div class="card-hover">
                    <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-4">Profile Stats</h3>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg">
                            <span class="text-sm text-gray-600 dark:text-gray-400">Profile Completion</span>
                            <span class="font-semibold text-gray-900 dark:text-white">
                                {% if profile.bio and profile.tagline and profile.photo %}100%{% elif profile.bio or profile.tagline or profile.photo %}50%{% else %}0%{% endif %}
                            </span>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg">
                            <span class="text-sm text-gray-600 dark:text-gray-400">Social Links</span>
                            <span class="font-semibold text-gray-900 dark:text-white">
                                {% if profile.social_links %}{{ profile.social_links|length }}{% else %}0{% endif %}
                            </span>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg">
                            <span class="text-sm text-gray-600 dark:text-gray-400">CV Uploaded</span>
                            <span class="font-semibold text-gray-900 dark:text-white">
                                {% if profile.cv_file %}<i class="fas fa-check text-green-600"></i>{% else %}<i class="fas fa-times text-red-600"></i>{% endif %}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
