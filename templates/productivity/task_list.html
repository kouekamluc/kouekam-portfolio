{% extends 'base.html' %}

{% block content %}
<section class="bg-white dark:bg-gray-900 py-8 lg:py-16">
    <div class="px-4 mx-auto max-w-screen-xl lg:px-6">
        <div class="flex justify-between items-center mb-8">
            <h1 class="text-4xl font-bold dark:text-white">Tasks</h1>
            <a href="{% url 'task_create' %}" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">Add Task</a>
        </div>
        
        <div class="flex gap-4 mb-6">
            <a href="{% url 'task_list' %}" class="px-4 py-2 rounded {% if not status_filter %}bg-blue-600 text-white{% else %}bg-gray-200 dark:bg-gray-700{% endif %}">All</a>
            <a href="?status=todo" class="px-4 py-2 rounded {% if status_filter == 'todo' %}bg-blue-600 text-white{% else %}bg-gray-200 dark:bg-gray-700{% endif %}">To Do</a>
            <a href="?status=in_progress" class="px-4 py-2 rounded {% if status_filter == 'in_progress' %}bg-blue-600 text-white{% else %}bg-gray-200 dark:bg-gray-700{% endif %}">In Progress</a>
            <a href="?status=done" class="px-4 py-2 rounded {% if status_filter == 'done' %}bg-blue-600 text-white{% else %}bg-gray-200 dark:bg-gray-700{% endif %}">Done</a>
        </div>
        
        <div class="space-y-4">
            {% for task in tasks %}
            <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 flex justify-between items-center">
                <div>
                    <h3 class="text-xl font-semibold dark:text-white">{{ task.title }}</h3>
                    {% if task.description %}<p class="text-gray-600 dark:text-gray-400 mt-2">{{ task.description }}</p>{% endif %}
                    <div class="flex gap-4 mt-4">
                        <span class="px-3 py-1 rounded-full text-sm {% if task.priority == 'high' %}bg-red-100 text-red-800{% elif task.priority == 'medium' %}bg-yellow-100 text-yellow-800{% else %}bg-green-100 text-green-800{% endif %}">
                            {{ task.get_priority_display }}
                        </span>
                        <span class="px-3 py-1 rounded-full text-sm bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200">
                            {{ task.get_status_display }}
                        </span>
                        {% if task.due_date %}<span class="text-gray-600 dark:text-gray-400">Due: {{ task.due_date }}</span>{% endif %}
                    </div>
                </div>
                <div class="flex gap-2">
                    <a href="{% url 'task_update' task.id %}" class="text-blue-600 hover:underline">Edit</a>
                    <a href="{% url 'task_delete' task.id %}" class="text-red-600 hover:underline">Delete</a>
                </div>
            </div>
            {% empty %}
            <p class="text-center text-gray-600 dark:text-gray-400">No tasks yet. <a href="{% url 'task_create' %}" class="text-blue-600 hover:underline">Create one</a></p>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}




